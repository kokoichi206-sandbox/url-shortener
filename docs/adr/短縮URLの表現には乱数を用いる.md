## 短縮 URL の表現には乱数を用いる

## ステータス

> proposed, accepted, rejected, deprecated, superseded

proposed

## コンテキスト

> 決定が求められている背景、対応案に対する評価を記載する。

正規の URL が渡された時、短縮 URL を生成する方法について検討する。

## 決定

> 意思決定の内容。

n を 3 とし、`[a-zA-Z0-9]{n}` の表現の文字列を乱数を用いて生成することとする。

## 代替手段

> 代替手段がある場合は、それと比較したときのメリット・デメリットなど。

- 乱数を使う
  - メリット
    - 後から文字列の長さの変更（最大数の変更）が容易
- ハッシュ値を使う
  - メリット
    - 同じ URL から再生成した時、基本的には同じ短縮 URL が返る
      - 基本的には再生成せずに、過去生成した値を返すつもり
  - デメリット
    - ハッシュ関数の戻り値のままでは長すぎるため、cutoff する工夫が必要

短い方が見やすく打ちやすいため、可能な限り短くする。
`(26+26+10)**3 = 238328` から 3文字でも 24 万の URL を表現できるので、個人利用では越すことはなさそう。

- 後から文字列長を変更し拡張できることも考え、乱数で生成する方法にする
- 打ちやすさと URL の特殊文字と被らないようにすることを考え `[a-zA-Z0-9]` を使用可能文字とする

## 影響

> 何が簡単になるか、何が難しくなるか。

可能な限り短い表現で短縮 URL を生成できる。
