## リダイレクトは 301 を用いる

## ステータス

> proposed, accepted, rejected, deprecated, superseded

proposed

## コンテキスト

> 決定が求められている背景、対応案に対する評価を記載する。

短縮 URL が渡された時に元の URL にリダイレクトさせることになるが、ステータスコードによる影響を調査し、最適なステータスコードを決定する。

## 決定

> 意思決定の内容。

現状分析などに使いたい用途はないため、サーバーへの負荷を考えて 301 をステータスコードとして使用する。

## 代替手段

> 代替手段がある場合は、それと比較したときのメリット・デメリットなど。

[MDM](https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections) を参考に考える。

- 301:
  - 恒久的なリソースの移動
  - ブラウザによってはレスポンスをキャッシュする
  - メリット
    - URL 短縮サービスの負荷の軽減になる
  - デメリット
    - 対象 URL が変わった時に、気づかずに元の URL に飛ばされる（短縮 URL のサービスとしてはあってはならない）
- 302:
  - 一時的なリソースの移動
  - メリット
    - 毎回 URL 短縮サービスに送られるため、クリック率・クリック元などの分析に使える
  - デメリット
    - URL 短縮サービスの負荷が高まるかも

## 影響

> 何が簡単になるか、何が難しくなるか。

301 が返ってきた時にブラウザが返したのか、短縮 URL がかえしたのかの判断が難しいかも。
